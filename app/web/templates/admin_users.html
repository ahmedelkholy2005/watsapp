{% extends "layout.html" %}
{% block content %}
<div class="card">
  <h3>الموظفين</h3>
  <form method="post" action="/admin/users" class="grid2">
    <input name="username" placeholder="username" required />
    <input name="name" placeholder="الاسم" />
    <input name="password" placeholder="كلمة المرور" required />
    <select name="role">
      <option value="employee">Employee</option>
      <option value="admin">Admin</option>
    </select>
    <button class="btn" type="submit">إضافة</button>
  </form>
</div>

<div class="card" style="margin-top:12px;">
  <table class="tbl">
    <thead><tr><th>ID</th><th>Username</th><th>الاسم</th><th>الدور</th><th>حالة</th><th></th></tr></thead>
    <tbody>
    {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.name }}</td>
        <td>{{ u.role.value }}</td>
        <td>{{ "نشط" if u.is_active else "موقوف" }}</td>
        <td>
          <form method="post" action="/admin/users/{{ u.id }}/toggle">
            <button class="btn ghost" type="submit">{{ "إيقاف" if u.is_active else "تفعيل" }}</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
